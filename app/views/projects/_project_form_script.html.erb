<% content_for(:before_body_end) do %>
  <script>
    $(function()
    {
      $('.btn').button();
      $billableValue = $('#billable-value');
      $hourlyRateFormGroup = $('.hourly-rate-input');
      $hourlyRateInput = $('#project_hourly_rate');
      $btnBillable = $('.btn-billable');

      if ($billableValue.val() === "t")
      {
        $btnBillable.addClass('btn-success active');
        $hourlyRateFormGroup.show();
        $billableValue.val('true');
      }

      $('.btn-privacy').click(function(e)
      {
        $('#privacy-value').val($(e.currentTarget).children('input[name=options]').val());
      });

      $btnBillable.click(function(e)
      {
        $currentTarget = $(e.currentTarget);

        if ($currentTarget.hasClass('active'))
        {
          // If it's already active then the click is making it unactive, therefore false
          $billableValue.val('f')
          $currentTarget.removeClass('btn-success').addClass('btn-default');
          $hourlyRateFormGroup.fadeOut(700, function() {
            $hourlyRateInput.val('');
          });
        }
        else
        {
          $billableValue.val('t');
          $currentTarget.removeClass('btn-default').addClass('btn-success');
          $hourlyRateFormGroup.fadeIn(700);
        }
      });
    });
  </script>
<% end %>
